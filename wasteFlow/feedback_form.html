<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feedback & Complaint Submission</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container mt-5">
    <h2 class="text-center mb-4">Submit Feedback or Complaint</h2>
    <div class="card p-4">
        <form id="feedbackForm">
            <div class="mb-3">
                <label class="form-label">User ID</label>
                <input type="text" class="form-control" id="userId" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Full Name</label>
                <input type="text" class="form-control" id="name" required>
            </div>
            <div class="mb-3">
                <label class="form-label">User Type</label>
                <select class="form-select" id="userType" required>
                    <option value="">Select</option>
                    <option>Resident</option>
                    <option>Commercial User</option>
                    <option>City Authority</option>
                </select>
            </div>
            <div class="mb-3">
                <label class="form-label">Category</label>
                <select class="form-select" id="category" required>
                    <option value="">Select</option>
                    <option>Missed Pickup</option>
                    <option>Overflow Bin</option>
                    <option>Service Quality</option>
                    <option>Other</option>
                </select>
            </div>
            <div class="mb-3">
                <label class="form-label">Description</label>
                <textarea class="form-control" id="description" rows="4" required></textarea>
            </div>
            <button type="submit" class="btn btn-success w-100">Submit</button>
        </form>
    </div>
</div>

<script>
document.getElementById('feedbackForm').addEventListener('submit', function(e){
    e.preventDefault();

    let data = JSON.parse(localStorage.getItem('feedbackData')) || [];

    // Use entered ID or generate one
    let enteredId = document.getElementById('userId').value.trim();
    let userId = enteredId !== "" ? enteredId : "FB-" + String(data.length + 1).padStart(4, '0');

    let feedback = {
        id: userId,
        name: document.getElementById('name').value,
        userType: document.getElementById('userType').value,
        category: document.getElementById('category').value,
        description: document.getElementById('description').value,
        date: new Date().toLocaleString()
    };

    data.push(feedback);
    localStorage.setItem('feedbackData', JSON.stringify(data));

    alert(`Feedback Submitted! Your ID is ${userId}`);
    this.reset();
});
</script>
</body>
</html>
